name: Build and Test

on: push

jobs:
    build-win64:
        name: Build for Wiin64
        runs-on: windows-2019
        strategy:
            matrix:
                cloud: [ 'AWS' ]
        steps:
            - uses: actions/checkout@v1
            - name: Build zlib
              shell: cmd
              env:
                  PLATFORM: x64
                  BUILD_TYPE: Debug
                  VS_VERSION: VS16
              run: scripts\build_zlib.bat :build %PLATFORM% %BUILD_TYPE% %VS_VERSION%
            - name: Upload zlib.zip
              uses: actions/upload-artifact@v1
              with:
                name: zlib_artifacts
                path: artifacts\*.zip
            - name: Build openssl
              shell: cmd
              env:
                  PLATFORM: x64
                  BUILD_TYPE: Debug
                  VS_VERSION: VS16
              run: scripts\build_openssl.bat :build %PLATFORM% %BUILD_TYPE% %VS_VERSION%
            - name: Build curl
              shell: cmd
              env:
                  PLATFORM: x64
                  BUILD_TYPE: Debug
                  VS_VERSION: VS16
              run: scripts\build_curl.bat :build %PLATFORM% %BUILD_TYPE% %VS_VERSION%
