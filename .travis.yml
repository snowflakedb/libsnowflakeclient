sudo: required
language: cpp
script:
  - ./scripts/run_travis.sh
matrix:
  include:
  - os: linux
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - g++-4.9
    env:
      - MATRIX_EVAL="CC=gcc-4.9 && CXX=g++-4.9"
    before_install:
      - eval "${MATRIX_EVAL}"
      - sudo apt-get update
      - sudo apt-get install lcov
      - openssl aes-256-cbc -k "$super_secret_password" -in parameters.json.enc -out parameters.json -d
      - pyenv local 3.6
      - pip install -U pip
      - pip install -U virtualenv
      - virtualenv env
      - source env/bin/activate
    after_succss:
      - bash <(curl -s https://codecov.io/bash)
  - os: linux
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - g++-4.9
    env:
      - USE_VALGRIND=true
      - MATRIX_EVAL="CC=gcc-4.9 && CXX=g++-4.9"
    before_install:
      - eval "${MATRIX_EVAL}"
      - sudo apt-get update
      - sudo apt-get install lcov valgrind
      - openssl aes-256-cbc -k "$super_secret_password" -in parameters.json.enc -out parameters.json -d
      - pyenv local 3.6
      - pip install -U pip
      - pip install -U virtualenv
      - virtualenv env
      - source env/bin/activate
  - os: osx
    before_install:
      - sw_vers
      - brew update
      - brew install python3 jq
      - openssl aes-256-cbc -k "$super_secret_password" -in parameters.json.enc -out parameters.json -d
      - virtualenv env -p python3
      - source env/bin/activate

env:
  global:
    secure: LC6gqcPZLnfj2cLMy7h4jjGmY3MyomTLPEg+MNq315cKadO5IgMYOmjBJtJJ3FJZQjxsxnwjM612xQXtCy2wVKizKlKLT9BXZBOE9P7gL7EfQYourwM0rpwVbf58xQTajt1QR/4jGE+l7mfjY/d4zoMOAo5VH/D8C76YpCDGFfKgdVFDj+ROjXpyt0VzdrO1WbjZ27M/4BDvKsoqfGt6aL0S00+hVgLZEJZED35hCAYVtO8VS/hk+x74GvjeLihPitpXBxeadyQnYdma7/bF1RnqKxaPv9n+fhroeIrupS+nkcGwKWS5VYOj5Ofag6vYBZ9m1VaRfV3pcsliN1xzTdBpyGKzV4RZAlxybRqQeO2g2yo+bvqWMvI2ZeSnp5x/l4/wecuNlbQag6XqE0nx21ywfqdALbiwmWhtKOGLuVBP8iBdAr2D2Jvc51cFEIR9LBWjTu0O9ZDJYRktvBHO3AUSLmg5pT8y7x3VwUM3TqseKefRT1BjiIENt3VJSrhAO9XoUZouvUgKspXhHay46uq+QjGNzSr66iDULpd+f0FGvwaA/Shvpkhjd0zJOd90ZeeGXlvnzC1a42v4fMWw1Hr75LDBgGHkQCIho9SUk1XIcjyEb9SwzjmLTcXoqcQykp544aAczSGznxBIubnqky6uhhg15lk1Z/t82327cq0=
